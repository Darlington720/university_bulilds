import{r as n,j as t,F as k,b as e,l as i,B as S,q as r,s as x,p as g,X as N,J as b,Z as o,d as y}from"./vendor.e47b60bf.js";import{a as w}from"./staffApi.72076233.js";import"./index.1de374d4.js";function v({columns:m,gridRef:h,onFirstDataRendered:f}){return n.exports.useState([]),n.exports.useState(!1),n.exports.useMemo(()=>({editable:!0,sortable:!0,filter:!0,resizable:!0}),[]),t(k,{children:[t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("div",{style:{display:"flex",alignItems:"center"},children:e(i.Control,{className:"mb-3",style:{width:300,alignSelf:"flex-end"},type:"text",id:"filter-text-box",placeholder:"Search..."})}),e("div",{style:{display:"flex"},children:e("div",{style:{},children:t(S,{variant:"primary",style:{padding:5,paddingLeft:10,paddingRight:10,alignItems:"center"},children:[e("i",{className:"si si-list",style:{marginRight:5,marginLeft:5}}),e("span",{children:"Export to Excel"})]})})})]}),e("div",{className:"ag-theme-alpine",style:{height:350,width:"100%"}})]})}const F=[{field:"course_unit",headerName:"Course Unit Name"},{field:"status",headerName:"registered",rowGroup:!0,hide:!0},{field:"session"},{field:"date"},{field:"room"}],G=[{field:"id"},{field:"invigilator_name"},{field:"date"},{field:"session"},{field:"room"}],c=({title:m,backgroundColor:h,total:f})=>e(x,{className:`overflow-hidden sales-card ${h}`,children:t("div",{className:"px-3 pt-3  pb-2 pt-0",children:[e("div",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:e("h6",{className:"tx-12 text-white",children:m})}),e("div",{className:"pb-0 mt-0",children:e("div",{className:"d-flex",children:e("div",{className:"",children:e("h4",{className:"tx-20 fw-bold mb-1 text-white",children:f})})})})]})}),M={start_date:"",end_date:"",school:{},campus:{},yr_sem:{}};function W(){const m=n.exports.useRef(),h=n.exports.useRef(),[f,C]=n.exports.useState([]),[R,_]=n.exports.useState([]),[E,T]=n.exports.useState([]),[l,u]=n.exports.useState(M),I=n.exports.useCallback(a=>{m.current.api.sizeColumnsToFit()},[]),L=n.exports.useCallback(a=>{h.current.api.sizeColumnsToFit()},[]),D=async()=>{const a=await w.examReportReqs();if(!a.ok)return alert("Failed to fetch the requisites");let d={schools:[],year_sem:[],campus:[]};a.data.result.schools.forEach(s=>{d.schools.push({value:s.school_id,label:`${s.school_name} - ${s.alias}`})});const p=a.data.result.schools.map(s=>({value:s.alias,label:`${s.school_name} - ${s.alias}`}));_(p),a.data.result.campus.forEach(s=>{d.campus.push({value:s.cam_id,label:s.campus_name})}),C(d.campus),a.data.result.year_sem.forEach(s=>{d.year_sem.push({value:s.ys_id,label:`year: ${s.year}, sem: ${s.sem}`})}),T(d.year_sem)},A=async a=>{a.preventDefault();const d=new Date(l.start_date),p=new Date(l.end_date),s={start_date:d.getFullYear-d.getMonth+1-d.getDate,end_date:p.getFullYear-p.getMonth+1-p.getDate,school_id:l.school.label,campus:l.campus.value,yr_sem_id:l.yr_sem.value};console.log("sending...",s)};return n.exports.useEffect(()=>{D()},[]),e(r,{lg:12,children:e(x,{className:"mg-b-20",children:e(x.Body,{children:t("div",{className:"ps-0",children:[e("div",{className:"main-profile-overview"}),e("form",{onSubmit:A,children:t(g,{className:"row-xs justify-content-center",style:{marginTop:10,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(r,{md:2,className:"",children:t(i.Group,{children:[e(i.Label,{className:"main-content-label tx-11 tx-medium tx-gray-600",style:{fontWeight:"bold"},children:"START DATE"}),e(N,{className:"custom-datepicker form-control",required:!0,selected:l.start_date,dateFormat:"dd/MM/yyyy",style:{color:"red"},onChange:a=>u({...l,start_date:a})})]})}),e(r,{md:2,className:"mg-t-10 mg-md-t-0",children:t(i.Group,{children:[e(i.Label,{className:"main-content-label tx-11 tx-medium tx-gray-600",style:{fontWeight:"bold"},children:"END DATE"}),e(N,{className:"form-control",required:!0,selected:l.end_date,dateFormat:"dd/MM/yyyy",onChange:a=>u({...l,end_date:a})})]})}),e(r,{md:3,className:"mg-t-10 mg-md-t-0",children:t(i.Group,{children:[e(i.Label,{className:"main-content-label tx-11 tx-medium tx-gray-600",style:{fontWeight:"bold"},children:"SCHOOL"}),e(b,{classNamePrefix:"Select-sm",required:!0,options:R,placeholder:"School",value:l.school,onChange:a=>{u({...l,school:a})}})]})}),e(r,{md:2,className:"mg-t-10 mg-md-t-0",children:t(i.Group,{children:[e(i.Label,{className:"main-content-label tx-11 tx-medium tx-gray-600",style:{fontWeight:"bold"},children:"CAMPUS"}),e(b,{classNamePrefix:"Select-sm",required:!0,options:f,value:l.campus,onChange:a=>{u({...l,campus:a})},placeholder:"Campus"})]})}),e(r,{md:2,className:"mg-t-10 mg-md-t-0",children:t(i.Group,{children:[e(i.Label,{className:"main-content-label tx-11 tx-medium tx-gray-600",style:{fontWeight:"bold"},children:"Year Sem"}),e(b,{classNamePrefix:"Select-sm",required:!0,options:E,value:l.yr_sem,onChange:a=>{u({...l,yr_sem:a})},placeholder:"Year and Sem"})]})}),e(r,{md:1,style:{marginBottom:5,alignSelf:"flex-end"},children:e(S,{className:"btn-primary btn-block",type:"submit",style:{padding:5,fontWeight:"bold"},children:e("span",{style:{fontWeight:"bold"},children:"LOAD"})})})]})}),t(g,{className:"mg-t-10",children:[e(r,{lg:8,children:t(o.Container,{className:"tabs-menu ",id:"left-tabs-example",defaultActiveKey:"first",children:[t(y,{className:"profile navtab-custom panel-tabs justify-content-center",children:[e(y.Item,{as:"li",children:t(y.Link,{className:"hidden-xs",eventKey:"first",children:[e("i",{className:"las la-images tx-15 me-1 visible-xs"}),"EXAMS"]})}),e(y.Item,{as:"li",children:t(y.Link,{className:"hidden-xs",eventKey:"second",children:[e("i",{className:"las la-user-circle tx-16 me-1 visible-xs"}),"INVIGILATORS"]})})]}),t(o.Content,{className:"border border-top-0 p-0 br-dark",style:{padding:0},children:[e(o.Pane,{eventKey:"first",children:e("div",{style:{paddingTop:10,paddingLeft:10,paddingRight:10},children:e(v,{columns:F,gridRef:m,onFirstDataRendered:I})})}),e(o.Pane,{eventKey:"second",children:e(v,{columns:G,gridRef:h,onFirstDataRendered:L})}),e(o.Pane,{eventKey:"third"}),e(o.Pane,{eventKey:"fourth"})]})]})}),t(r,{lg:4,className:"mg-t-20",style:{},children:[t(g,{lg:12,style:{},children:[e(r,{children:e(c,{title:"TOTAL EXAMS",total:20,backgroundColor:" bg-primary-gradient"})}),e(r,{children:e(c,{title:"TOTAL INVIGILATORS",total:34,backgroundColor:"bg-primary-gradient"})})]}),t(g,{lg:12,style:{},children:[e(r,{children:e(c,{title:"EXAMS REGISTERED",total:20,backgroundColor:"bg-success-gradient"})}),e(r,{children:e(c,{title:"ENGAGED INVIGILATORS",total:34,backgroundColor:"bg-success-gradient"})})]}),t(g,{lg:12,style:{},children:[e(r,{children:e(c,{title:"EXAMS NOT REGISTERED",total:20,backgroundColor:" bg-danger-gradient"})}),e(r,{children:e(c,{title:"UNCOMPLIANT INVIGILATORS",total:34,backgroundColor:"bg-danger-gradient"})})]})]})]})]})})})})}export{W as default};
