import{R as B,b as e,E as j,r,k as E,j as a,F as N,l as T,T as F,n as k,o as p,x as L,y as O,z as W,G as _,aa as V,p as M,q as x,J as Y,B as I,Y as K,s as b}from"./vendor.e47b60bf.js";import{d as X,c as q}from"./index.b9ba7186.js";B.memo(()=>e("div",{style:{whiteSpace:"nowrap",overflowX:"auto"},children:e(j,{className:"chartsh",option:{tooltip:{trigger:"axis",axisPointer:{type:"line"}},grid:{top:"6",right:"0",bottom:"17",left:"25"},xAxis:[{type:"category",align:"center",axisLabel:{show:!0,formatter:function(o,f){return z(o,15)}},data:["Business Communication","Computer Maths","Structured Programming","Artificial Intelligence","Computer Repair"]}],yAxis:[{type:"value"}],series:[{name:"Taught Percentage",type:"bar",stack:"Stack",barMaxWidth:20,color:"#285cf7",emphasis:{focus:"series"},data:[10,15,9,18,10,15]},{name:"Not Taught",type:"bar",stack:"Stack",barMaxWidth:20,color:"#f7557a",emphasis:{focus:"series"},data:[10,14,10,15,9,25]}]},height:"150px",style:{whiteSpace:"nowrap",overflowX:"auto"}})}));function z(i,o){return i.length>o?i.slice(0,o-3)+"...":i}const H=B.memo(({data:i,yr:o,selectedDate:f})=>{const[C,S]=r.exports.useState(!1);r.exports.useState(!1);const[y,v]=r.exports.useState([]),[d,c]=r.exports.useState(0),[w,m]=r.exports.useState(""),[g,A]=r.exports.useState();let D=1;const l=E({columns:[{header:"#",cell:n=>D++},{header:"student",accessorKey:"name"},{header:"card",accessorKey:"card_no"},{header:"Assigned By",accessorKey:"staff_name"}],data:i,getCoreRowModel:L(),getPaginationRowModel:O(),getSortedRowModel:W(),getFilteredRowModel:_(),state:{sorting:y,globalFilter:w},onSortingChange:v,onGlobalFilterChange:m}),G=()=>{const n=l.getPageCount(),u=10,s=[];if(n<=u)for(let t=0;t<n;t++)s.push(e(p.Item,{active:d===t,onClick:()=>{l.setPageIndex(t),c(t)},children:t+1},t));else{const t=Math.max(d-Math.floor(u/2),0),P=Math.min(t+u-1,n-1);t>0&&s.push(e(p.Ellipsis,{onClick:()=>{l.setPageIndex(0),c(0)}},"start-ellipsis"));for(let h=t;h<=P;h++)s.push(e(p.Item,{active:d===h,onClick:()=>{l.setPageIndex(h),c(h)},children:h+1},h));P<n-1&&s.push(e(p.Ellipsis,{onClick:()=>{l.setPageIndex(l.getPageCount()-1),c(l.getPageCount()-1)}},"end-ellipsis"))}return s};return a(N,{children:[e("div",{style:{display:"flex",justifyContent:"flex-end",width:400},children:e(T.Control,{className:"mb-2 mg-b-10",style:{alignSelf:"flex-end"},type:"text",value:w,onChange:n=>{m(n.target.value)},placeholder:"Search"})}),a(F,{responsive:!0,bordered:!0,hover:!0,style:{padding:0,marginBottom:5},children:[e("thead",{children:l.getHeaderGroups().map((n,u)=>e("tr",{style:{},children:n.headers.map((s,t)=>a("th",{onClick:s.column.getToggleSortingHandler(),style:{cursor:"pointer"},children:[k(s.column.columnDef.header,s.getContext()),e("span",{children:{asc:e("i",{style:{},className:"fa fa-angle-up"}),desc:e("i",{style:{},className:"fa fa-angle-down"})}[s.column.getIsSorted()??null]})]}))},u))}),e("tbody",{style:{padding:0},children:l.getRowModel().rows.length!==0?l.getRowModel().rows.map((n,u)=>e("tr",{style:{padding:0},onDoubleClick:()=>{S(!0),A(n.original)},children:n.getVisibleCells().map((s,t)=>e("td",{style:{padding:5},children:k(s.column.columnDef.cell,s.getContext())},t))},u)):e("tr",{style:{alignSelf:"center"},children:e("td",{style:{textAlign:"center"},colSpan:4,children:a("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e("img",{src:X,alt:"",className:"wd-15p"}),e("h5",{className:"mg-b-10 mg-t-15 tx-18",children:"No Data Available"})]})})})})]}),e("div",{style:{marginTop:10,display:"flex",justifyContent:"flex-end"},children:a(p,{className:"mb-0",children:[e(p.Prev,{disabled:d===0,onClick:()=>{l.previousPage(),c(d-1)}}),G(),e(p.Next,{disabled:d===l.getPageCount()-1,onClick:()=>{l.nextPage(),c(d+1)}})]})})]})}),$=[{value:"2020",label:"2020"},{value:"2021",label:"2021"},{value:"2022",label:"2022"},{value:"2023",label:"2023"}],R=({title:i,backgroundColor:o,total:f})=>e(b,{className:`overflow-hidden sales-card ${o} mb-3`,children:a("div",{className:"px-3 pt-3  pb-2 pt-0",children:[e("div",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:e("h6",{className:"tx-12 text-white",children:i})}),e("div",{className:"pb-0 mt-0",children:e("div",{className:"d-flex",children:e("div",{className:"",children:e("h4",{className:"tx-20 fw-bold mb-1 text-white",children:f})})})})]})});function Z(){const i=r.exports.useRef(null),[o,f]=r.exports.useState(),[C,S]=r.exports.useState(0),[y,v]=r.exports.useState([]);r.exports.useState(0);const[d,c]=r.exports.useState();return a(N,{children:[e(V,{ref:i}),a("div",{children:[e("h5",{style:{marginBottom:20},children:"Graduation Card Report"}),e("div",{children:e(T,{onSubmit:async m=>{m.preventDefault(),c(!0);const g=await q.getGraduationCardsReport(o.value);if(c(!1),!g.ok)return console.log(g.data),alert("Failed to load the data");g.data.success&&i.current.show({severity:"success",summary:"Success",detail:"Graduation Cards Loaded Successfully",life:3e3}),console.log("the response",g.data),v(g.data.result.cards),S(g.data.result.total_grad_cards)},children:a(M,{className:"row-sm center",style:{marginBottom:20},children:[a(x,{lg:3,children:[e("label",{className:"lb",children:"Acc Year"}),e(Y,{classNamePrefix:"Select-sm",value:o,required:!0,onChange:m=>f(m),options:$,placeholder:"Select Acc/yr"})]}),e(x,{lg:1,style:{display:"flex",justifyContent:"flex-end"},children:e(I,{type:"submit",style:{alignSelf:"flex-end",width:"100%",marginBottom:3,padding:10,paddingTop:5,paddingBottom:5},children:d?e(K,{animation:"border",size:"sm",className:"",role:"status","aria-hidden":"true",children:e("span",{className:"sr-only",children:"Loading..."})}):"Load"})})]})})}),e("div",{children:a(M,{style:{marginBottom:10},children:[e(x,{lg:9,children:e(b,{style:{boxShadow:"none",borderColor:"lightgray",borderWidth:1,margin:0,padding:0},children:a(N,{children:[a("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:10},children:[e("div",{children:e("h5",{style:{margin:0,padding:0},children:"Distributed Graduation Cards"})}),e("div",{style:{display:"flex",justifyContent:"space-between",width:"auto"},children:e(I,{style:{alignSelf:"center",marginLeft:10,padding:10,paddingTop:5,paddingBottom:5},children:"Export"})})]}),e("hr",{style:{padding:0,margin:0}}),e(b.Body,{style:{padding:10},children:e(H,{data:y})})]})})}),e(x,{lg:3,children:a(b,{style:{boxShadow:"none",borderColor:"lightgray",borderWidth:1,margin:0,padding:20,display:"flex",flexDirection:"column",justifyContent:"space-evenly"},children:[e("div",{children:e(R,{title:"TOTAL CARDS",total:C,backgroundColor:"bg-primary-gradient"})}),e("div",{children:e(R,{title:"GIVEN OUT CARDS",total:y.length,backgroundColor:"bg-success-gradient"})}),e("div",{children:e(R,{title:"REMAINING CARDS",total:C-y.length,backgroundColor:"bg-warning-gradient"})})]})})]})})]})]})}export{Z as default};
