import{r,a0 as C,b as e,j as t,p as m,q as l,C as w,a7 as y,l as n,B as S}from"./vendor.daf4729c.js";import{S as A,n as L,a as I}from"./index.fbf37228.js";import{a as M}from"./staffApi.acf86b8e.js";const P="/assets/im1.47878e53.jpeg",U={username:"",password:""};function q(){const i=r.exports.useContext(A),[p,o]=r.exports.useState(""),[g,u]=r.exports.useState(!1),[d,x]=r.exports.useState(U),{username:N,password:b}=d,h=s=>{x({...d,[s.target.name]:s.target.value}),o("")},v=async s=>{s.preventDefault(),u(!0);const a=await M.login(d);if(u(!1),!a.ok){o(a.data.error);return}if(a.data.role==="Student"){o("Invalid Username or password");return}console.log("response",a.data),i.setCampus(a.data.assignedRole.campus_id===1?{id:1,name:"MAIN CAMPUS"}:{id:2,name:"KAMPALA CAMPUS"}),i.setIsLoggedIn(!0),i.setUser(a.data),I.apiClient.setHeader("session_token",a.data.active_auth),f(a.data.assignedRole.role)};let c=C();const f=s=>{c(s==="9"?"/recordvoters":s==="11"?"/voteassigning":"/indexpage")};return e("div",{children:e("div",{className:"main-container container-fluid",children:t(m,{className:"no-gutter",children:[e(l,{md:6,lg:6,xl:7,className:"d-none d-md-flex bg-primary-transparent",children:e(m,{className:"wd-100p mx-auto text-center",children:e(l,{md:12,lg:12,xl:12,className:"my-auto mx-auto wd-100p",children:e("img",{src:P,className:"my-auto ht-xl-80p wd-md-100p wd-xl-80p mx-auto",alt:"logo"})})})}),e(l,{md:6,lg:6,xl:5,className:"bg-white py-4",children:e("div",{className:"login d-flex align-items-center py-2",children:e(w,{className:"p-0",children:e(m,{children:e(l,{md:10,lg:10,xl:9,className:"mx-auto",children:t("div",{className:"card-sigin",children:[e("div",{className:"mb-5 d-flex",children:e("img",{alt:"user-img",style:{width:200},src:L})}),e("div",{className:"card-sigin",children:t("div",{className:"main-signup-header",children:[e("h2",{children:"Welcome!!"}),e("h5",{className:"fw-semibold mb-4",children:"Please sign in to continue."}),p&&e(y,{variant:"danger",children:p}),t(n,{action:"#",onSubmit:v,children:[t(n.Group,{children:[e(n.Label,{className:"mb-2",children:"Username"}),e(n.Control,{className:"mb-3",name:"username",placeholder:"Enter your username",type:"text",value:N,onChange:h,required:!0})," "]}),t(n.Group,{children:[e(n.Label,{className:"mb-2",children:"Password"}),e(n.Control,{className:"mb-3",name:"password",placeholder:"Enter your password",type:"password",value:b,onChange:h,required:!0})," "]}),t(S,{className:"btn-main-primary btn-block",type:"submit",children:["Sign In",g?e("span",{role:"status","aria-hidden":"true",className:"spinner-border spinner-border-sm ms-2"}):""]})]})]})})]})})})})})})]})})})}export{q as default};
